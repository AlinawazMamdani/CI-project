version: '3.7'
services:
        account-service:
                image: alinawazmamdani/account-service
                build: ./account-service
                depends_on:
                        - mongo-service
                        - secret-service
        aes-encryption-service:
                image: alinawazmamdani/aes-encryption-service
                build: ./aes-encryption-service
        authentication-client:
                image: alinawazmamdani/authentication-client
                build: ./authentication-client
        authentication-service:
                image: alinawazmamdani/authentication-service
                build: ./authentication-service
                environment:
                        - ACTIVATION_LINK=http://${ACTIVATION_IP}/authentication/api/activate
        dashboard-client:
                image: alinawazmamdani/dashboard-client 
                build: ./dashboard-client
        dashboard-service:
                image: alinawazmamdani/dashboard-service 
                build: ./dashboard-service
                depends_on:
                        - account-service
                        - session-token-service
        email-service: 
                image: alinawazmamdani/email-service 
                build: ./email-service
                depends_on:
                        - aes-encryption-service
                environment:
                        - GMAIL_USER=ilovedocker123@gmail.com
                        - GMAIL_PASS=ilovedocker1!
                        - SERVICE_NAME="CI project"

        gateway: 
                image: alinawazmamdani/gateway 
                build: ./gateway
                ports:
                        - target: 80
                          published: 80
                          protocol: tcp
                depends_on:
                        - dashboard-client
                        - authentication-client
                        - authentication-service
                        - dashboard-service
        group-service: 
                image: alinawazmamdani/group-service 
                build: ./group-service
        mongo-service: 
                image: alinawazmamdani/mongo-service  
                build: ./mongo-service
                depends_on:
                        - mongo
        role-service: 
                image: alinawazmamdani/role-service
                build: ./role-service
        secret-service: 
                image: alinawazmamdani/secret-service 
                build: ./secret-service
                depends_on:
                        - mongo-service
        session-token-service: 
                image: alinawazmamdani/session-token-service 
                build: ./session-token-service
                depends_on:
                        - mongo-service
                        - aes-encryption-service
        mongo:
                image: mongo 



